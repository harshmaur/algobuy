//
//This mixin, once included, will generate rules for a customized auto-complete
//widget.
//
//@param
//
@import 'font_smoothing';

@mixin autocomplete($width: 250, $height: 25) {
  display: inline-block;
  position: relative;

  width: #{$width}px;

  color: $dark-grey;

  text-align: left;

  .search-input {
    .query {
      @include font-smoothing(on);

      width: 100%;
      height: #{$height}px;
      padding: #{$height * .1}px #{$height * .2}px;
      padding-right: 35px;

      font-size: #{$height * .5}px;
      font-weight: 300;
      line-height: #{$height * .9}px;

      border: 2px solid $dark-blue;
      border-radius: 5px;

      outline: none;

      box-shadow: 3px 4px 5px 0 rgba(0, 0, 0, .2) inset;

      &:hover,
      &:focus {
        border-color: $lighter-blue;
      }
    }

    .query-input-icon {
      position: absolute;
      right: 7px;
      top: 10px;

      width: 27px;
      height: 27px;

      background: transparent url('/images/clear-icon.png') no-repeat center center;
      cursor: pointer;

      opacity: .6;
    }
  }

  &:hover {
    .query-input-icon {
      opacity: 1;
    }
  }

  &.empty {
    .query-input-icon {
      background: transparent url('/images/search-icon.png') no-repeat center center;
      cursor: default;
      pointer-events: none;
    }
  }

  .search-suggestions {
    position: relative;
    left: 50%;

    width: #{$width - 4}px;

    margin-left: -#{$width / 2 - 2}px;
    padding: 10px;

    background-color: rgb(255, 255, 255);

    border: 1px solid rgb(128, 128, 128);
    border-top: 0;

    box-shadow: 5px 9px 20px 0 rgba(0, 0, 0, .3);

    &.no-results,
    &.search-error {
      @include font-smoothing(on);

      text-align: center;

      color: $medium-grey;

      font-size: 1.5em;
      font-weight: 300;

      img {
        vertical-align: bottom;
        margin-left: 20px;
      }
    }

    .price-range {
      @include font-smoothing(on);

      display: inline-block;

      margin: 0 2px;
      padding: 0 5px;

      border: 1px solid $dark-blue;
      border-radius: 5px;

      color: $dark-blue;
      background: $white;

      font-size: .7em;
      font-weight: 600;
      line-height: 18px;

      cursor: pointer;

      &.active {
        border-color: transparent;
        color: $white;
        background-color: $dark-blue;
      }

      &.highlighted,
      &:hover,
      &:focus {
        border-color: transparent;
        color: $white;
        background-color: $lighter-blue;
        outline: none;
      }
    }

    %suggestions {
      margin-top: 10px;
      font-size: .875em;

      .heading {
        @include font-smoothing(on);

        color: $dark-blue;
        font-weight: 600;
        border-bottom: 1px solid $dark-blue;
      }
    }

    .categories {
      @extend %suggestions;

      .list {
        padding: 0;
        margin: 0;

        list-style-type: none;

        li {
          padding: 4px 5px;
          cursor: pointer;

          &:hover,
          &:focus {
            background-color: $selection-blue;
            outline: none;
          }

          .results-count {
            @include font-smoothing(on);
            font-weight: 600;
          }

          .category-name {
            color: $lighter-blue;
          }
        }
      }
    }
  }
}
